<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>内嵌webview的html页面</title>
    <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
    <script
      type="text/javascript"
      src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"
    ></script>
    <script>
      // VConsole 默认会挂载到 `window.VConsole` 上
      var vConsole = new window.VConsole();
    </script>
  </head>
  <body>
    <h1>内嵌webveiw</h1>
    <button id="login">请重新登录</button>
    <script>
      const url = "https://t7.baidu.com/it/u=1831997705,836992814&fm=193&f=GIF";
      document.getElementById("login").addEventListener("click", () => {
        wx.miniProgram.reLaunch({
          url: "/pages/my/my",
        });
      });
      // console.log(window.location);
      const search = window.location.search.split("?")[1] || "";
      // 不完整的的
      const token = search.split("=")[1];
      console.log(token);
      wx.miniProgram.postMessage({
        data: {
          title: "呵呵哒",
          imagePath: url,
          hehe: 123,
        },
      });
    </script>
  </body>
</html>
